package main.java.unq.cazaDeVinchucas.modelo;

import java.io.File;
import java.util.ArrayList;
import java.util.List;


public class Muestra {
	
	public Usuario usuarioDue単oDeLaMuestra;
	public File fotoDeLaMuestra; 
	public Ubicacion ubicacionDeLaMuestra;
	private EstadoDeLaMuestra estadoDeLaMuestra = new ENormal(this);
	public ArrayList <Opinion> opinionesDeLaMuestra = new ArrayList <Opinion>();
	
	//Constructor de la muestra:
	public Muestra(Usuario usuarioDue単oDeLaMuestra, File fotoDeLaMuestra, Ubicacion ubicacionDeLaMuestra,
			EstadoDeLaMuestra estadoDeLaMuestra) {
		super();
		this.usuarioDue単oDeLaMuestra = usuarioDue単oDeLaMuestra;
		this.fotoDeLaMuestra = fotoDeLaMuestra;
		this.ubicacionDeLaMuestra = ubicacionDeLaMuestra;
		this.estadoDeLaMuestra = estadoDeLaMuestra;
	}
	
	//Getters y Setters de la muestra:
	
	public void agregarOpinion(Opinion opinionAAgregar) {
			this.opinionesDeLaMuestra.add(opinionAAgregar);
			this.estadoDeLaMuestra.corroborarEstado();
	}
	
	public List<Opinion> getOpinionesDeLaMuestra() {
		return this.opinionesDeLaMuestra;
	}
		
	public File getFotoDeLaMuestra() {
		return this.fotoDeLaMuestra;
	}

	public Ubicacion getUbicacionDeLaMuestra() {
		return this.ubicacionDeLaMuestra;
	}
	
	public EstadoDeLaMuestra getEstadoDeLaMuestra() {
		return this.estadoDeLaMuestra;
	}

	public void setEstadoDeLaMuestra(EstadoDeLaMuestra estadoDeLaMuestra) {
		this.estadoDeLaMuestra = estadoDeLaMuestra;
	}

	public List <String> getListaDeResultadosDeOpinionDeUnaLista(List <Opinion> unaLista) {
		final List <String> listaDeOpiniones = new ArrayList <String>();
		
		for (Opinion opinion : unaLista) {
			listaDeOpiniones.add(opinion.getOpinion());
		}
		
		return listaDeOpiniones;
	}
	
	public List<Opinion> getListaOpinionesExpertasDeLaMuestra() {
		List <Opinion> listaDeOpinionesExpertas = new ArrayList <Opinion>();
		
		for (Opinion opinion : this.opinionesDeLaMuestra) {
			if(opinion.getTipo().equals("Experto")) {
				listaDeOpinionesExpertas.add(opinion);
			}
		}
		return listaDeOpinionesExpertas;
	}

	
	//Funcionalidad de la muestra:
	
	public String resultadoFinal() {
		return this.estadoDeLaMuestra.resultadoFinal();
	}

	
}


